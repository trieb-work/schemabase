//// ------------------------------------------------------
//// THIS FILE WAS AUTOMATICALLY GENERATED (DO NOT MODIFY)
//// ------------------------------------------------------

Table SaleorOrder {
  id String [not null, note: 'Saleor Internal Id']
  createdAt DateTime [not null]
  order Order [not null]
  orderId String [not null]
  orderNumber String [not null]
  installedSaleorApp InstalledSaleorApp [not null]
  installedSaleorAppId String [not null]
  saleorPayment SaleorPayment [not null]

  indexes {
    (id, installedSaleorAppId) [unique]
    (orderId, installedSaleorAppId) [unique]
  }
}

Table SaleorPackage {
  id String [not null, note: 'Saleor Internal Id']
  createdAt DateTime [not null]
  package Package [not null]
  packageId String [not null]
  installedSaleorApp InstalledSaleorApp [not null]
  installedSaleorAppId String [not null]

  indexes {
    (id, installedSaleorAppId) [unique]
  }
}

Table SaleorFulfillmentLine {
  id String [not null, note: 'Saleor Internal Id']
  packagelineItem PackageLineItem [not null]
  packageLineItemId String [not null]
  installedSaleorApp InstalledSaleorApp [not null]
  installedSaleorAppId String [not null]

  indexes {
    (id, installedSaleorAppId) [unique]
  }
}

Table SaleorOrderLineItem {
  id String [not null, note: 'Saleor Internal Id']
  orderLineItem OrderLineItem [not null]
  orderLineItemId String [not null]
  installedSaleorApp InstalledSaleorApp [not null]
  installedSaleorAppId String [not null]

  indexes {
    (id, installedSaleorAppId) [unique]
  }
}

Table SaleorPayment {
  id String [not null, note: 'Saleor Internal Id']
  createdAt DateTime [not null]
  updatedAt DateTime [not null]
  saleorOrder SaleorOrder
  saleorOrderId String
  payment Payment
  paymentId String
  installedSaleorApp InstalledSaleorApp [not null]
  installedSaleorAppId String [not null]

  indexes {
    (id, installedSaleorAppId) [unique]
  }
}

Table SaleorProductVariant {
  id String [not null, note: 'Saleor internal product variant id']
  productId String [not null, note: 'Saleor internal product Id']
  updatedAt DateTime [not null]
  productVariant ProductVariant [not null]
  productVariantId String [not null]
  installedSaleorApp InstalledSaleorApp [not null]
  installedSaleorAppId String [not null]

  indexes {
    (id, installedSaleorAppId) [unique]
  }
}

Table SaleorWarehouse {
  id String [not null, note: 'Saleor Internal Id']
  warehouse Warehouse [not null]
  warehouseId String [not null]
  installedSaleorApp InstalledSaleorApp [not null]
  installedSaleorAppId String [not null]

  indexes {
    (id, installedSaleorAppId) [unique]
  }
}

Table SaleorPaymentGateway {
  id String [not null, note: 'Saleor Internal Id']
  installedSaleorApp InstalledSaleorApp [not null]
  installedSaleorAppId String [not null]
  paymentMethods PaymentMethod [not null]

  indexes {
    (id, installedSaleorAppId) [unique]
  }
}

Table ZohoItem {
  id String [not null, note: 'Zoho Internal Id']
  createdAt DateTime [not null]
  updatedAt DateTime [not null]
  productVariant ProductVariant [not null]
  productVariantId String [not null]
  zohoApp ZohoApp [not null]
  zohoAppId String [not null]

  indexes {
    (id, zohoAppId) [unique]
  }
}

Table ZohoPackage {
  id String [not null, note: 'Zoho Internal Id']
  shipmentId String
  createdAt DateTime [not null]
  updatedAt DateTime [not null]
  package Package [not null]
  packageId String [not null]
  zohoApp ZohoApp [not null]
  zohoAppId String [not null]

  indexes {
    (id, zohoAppId) [unique]
  }
}

Table ZohoContact {
  id String [not null]
  createdAt DateTime
  updatedAt DateTime
  zohoApp ZohoApp [not null]
  zohoAppId String [not null]
  zohoContactPerson ZohoContactPerson [not null]
  zohoSalesOrder ZohoSalesOrder [not null]

  indexes {
    (id, zohoAppId) [unique]
  }
}

Table ZohoContactPerson {
  id String [not null, note: 'Zoho Internal ContactPerson Id']
  active Boolean [not null, default: true, note: 'Contacts/Contactpersons can be disabled to filter out merged contacts']
  zohoContact ZohoContact [not null]
  zohoContactId String [not null]
  contact Contact [not null]
  contactId String [not null]
  email String
  zohoApp ZohoApp [not null]
  zohoAppId String [not null]
  zohoSalesOrders ZohoSalesOrder [not null]

  indexes {
    (id, zohoAppId) [unique]
  }
}

Table ZohoAddress {
  id String [not null, note: 'Zoho internal Address id']
  address Address [not null]
  addressId String [not null]
  zohoApp ZohoApp [not null]
  zohoAppId String [not null]

  indexes {
    (id, zohoAppId) [unique]
  }
}

Table ZohoSalesOrder {
  id String [not null, note: 'Zoho Internal Id']
  createdAt DateTime [not null]
  updatedAt DateTime [not null]
  zohoContact ZohoContact
  zohoContactId String
  order Order [not null]
  orderId String [not null, note: 'The ECI internal order ID ']
  zohoApp ZohoApp [not null]
  zohoAppId String [not null]
  zohoContactPerson ZohoContactPerson
  zohoContactPersonId String
  zohoContactPersonZohoAppId String

  indexes {
    (id, zohoAppId) [unique]
  }
}

Table ZohoInvoice {
  id String [not null, note: 'Zoho Internal Id']
  createdAt DateTime [not null]
  updatedAt DateTime [not null]
  number String [not null]
  invoice Invoice [not null]
  invoiceId String [not null]
  zohoApp ZohoApp [not null]
  zohoAppId String [not null]

  indexes {
    (id, zohoAppId) [unique]
    (number, zohoAppId) [unique]
  }
}

Table ZohoPayment {
  id String [not null, note: 'Zoho Internal Id']
  createdAt DateTime [not null]
  updatedAt DateTime [not null]
  payment Payment
  paymentId String [unique]
  zohoApp ZohoApp [not null]
  zohoAppId String [not null]

  indexes {
    (id, zohoAppId) [unique]
  }

  Note: 'Zoho specific model.'
}

Table ZohoBankAccount {
  id String [not null, note: 'Zoho Internal Bankacount Id']
  name String [not null]
  currency Currency [not null]
  active Boolean [not null, default: true]
  paymentMethods PaymentMethod [not null]
  zohoApp ZohoApp [not null]
  zohoAppId String [not null]

  indexes {
    (id, zohoAppId) [unique]
  }
}

Table ZohoWarehouse {
  id String [not null, note: 'Zoho Internal Id']
  warehouse Warehouse [not null]
  warehouseId String [not null]
  zohoApp ZohoApp [not null]
  zohoAppId String [not null]

  indexes {
    (id, zohoAppId) [unique]
  }
}

Table ZohoTax {
  id String [not null, note: 'internal ID of tax in Zoho']
  tax Tax [not null]
  taxId String [not null, note: 'ID of eci internal Tax Object']
  zohoApp ZohoApp [not null]
  zohoAppId String [not null]

  indexes {
    (id, zohoAppId) [unique]
  }
}

Table ZohoOrderLineItem {
  id String [not null, note: 'Zoho Internal Id']
  orderLineItem OrderLineItem [not null]
  orderLineItemId String [not null]
  zohoApp ZohoApp [not null]
  zohoAppId String [not null]

  indexes {
    (id, zohoAppId) [unique]
  }
}

Table ZohoPackageLineItem {
  id String [not null, note: 'Zoho Internal Id']
  packagelineItem PackageLineItem [not null]
  packagelineItemId String [not null]
  zohoApp ZohoApp [not null]
  zohoAppId String [not null]
  orderLineItem OrderLineItem
  orderLineItemId String

  indexes {
    (id, zohoAppId) [unique]
  }
}

Table Invoice {
  id String [pk]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  invoiceNumber String [not null]
  payments Payment [not null]
  tenant Tenant [not null]
  tenantId String [not null]
  orders Order [not null]
  zohoInvoice ZohoInvoice [not null]

  indexes {
    (invoiceNumber, tenantId) [unique]
  }
}

Table Tax {
  id String [pk]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  name String [not null]
  normalizedName String [not null]
  percentage Float [not null]
  shippingTaxInOrders Order [not null, note: 'An array of orders where this tax is used as the tax for the shipping method']
  taxInLineItems OrderLineItem [not null, note: 'An array of lineitems where this tax is used as the tax for the line item']
  tenant Tenant [not null]
  tenantId String [not null]
  zohoTaxes ZohoTax [not null]

  indexes {
    (normalizedName, tenantId) [unique]
    (percentage, tenantId) [unique]
  }
}

Table Payment {
  id String [pk]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  referenceNumber String [not null]
  amount Float [not null]
  transactionFee Float [not null, default: 0, note: 'Costs for this transaction, for example bank charges, gateway charges, paypal charges']
  order Order
  orderId String
  tenant Tenant [not null]
  tenantId String [not null]
  paymentMethod PaymentMethod [not null]
  paymentMethodId String [not null]
  invoices Invoice [not null]
  zohoPayment ZohoPayment [not null]
  saleorPayment SaleorPayment [not null]
  braintreeTransactions BraintreeTransaction [not null]

  indexes {
    (orderId, tenantId) [unique]
    (referenceNumber, tenantId) [unique]
  }
}

Table PaymentMethod {
  id String [pk]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  gatewayType GatewayType [not null]
  methodType PaymentMethodType [not null]
  currency Currency [not null]
  saleorPaymentGateway SaleorPaymentGateway
  saleorPaymentGatewayId String
  saleorPaymentGatewayInstalledSaleorAppId String
  zohoBankAccount ZohoBankAccount
  zohoBankAccountId String
  zohoBankAccountZohoAppId String
  payments Payment [not null]
  tenant Tenant [not null]
  tenantId String [not null]

  indexes {
    (gatewayType, methodType, currency, tenantId) [unique]
  }
}

Table Company {
  id String [pk]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  name String [not null]
  normalizedName String [not null]
  contacts Contact [not null]
  tenant Tenant [not null]
  tenantId String [not null]

  indexes {
    (name, tenantId) [unique]
    (normalizedName, tenantId) [unique]
  }
}

Table Contact {
  id String [pk]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  email String [not null]
  firstName String
  lastName String
  orders Order [not null]
  company Company [note: 'A Contact can be related to one company']
  companyId String
  tenant Tenant [not null]
  tenantId String [not null]
  zohoContactPersons ZohoContactPerson [not null]
  addresses Address [not null]

  indexes {
    (email, tenantId) [unique]
  }

  Note: 'The ECI internal contact model. One contact has one E-Mail address only.
E-Mail addresses are unique per tenant
In some systems the Contact is equal to Users or Accounts'
}

Table Warehouse {
  id String [pk]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  name String [not null]
  normalizedName String [not null]
  tenant Tenant [not null]
  tenantId String [not null]
  zohoWarehouse ZohoWarehouse [not null]
  saleorWarehouse SaleorWarehouse [not null]
  xentralProxyIntegration XentralProxyIntegration [not null]
  orderLineItems OrderLineItem [not null]
  packageLineItems PackageLineItem [not null]
  stockEntries StockEntries [not null]

  indexes {
    (name, tenantId) [unique]
    (normalizedName, tenantId) [unique]
  }
}

Table OrderLineItem {
  id String [pk]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  uniqueString String [not null]
  order Order [not null]
  orderId String [not null]
  warehouse Warehouse
  warehouseId String
  quantity Float [not null]
  sku String [not null]
  tax Tax [not null]
  taxId String [not null]
  totalPriceNet Float [note: 'The total net price (price excluding taxes) of all line item.
Optional, as we might have just one of the two values on hand']
  totalPriceGross Float [note: 'The total gross price (price including taxes) of all line item.
Optional, as we might have just one of the two values on hand']
  discountValueNet Float [not null, default: 0]
  productVariant ProductVariant [not null]
  productVariantId String [not null]
  tenant Tenant [not null]
  tenantId String [not null]
  zohoPackageLineItems ZohoPackageLineItem [not null]
  saleorOrderLineItems SaleorOrderLineItem [not null]
  zohoOrderLineItems ZohoOrderLineItem [not null]

  indexes {
    (uniqueString, tenantId) [unique]
  }
}

Table PackageLineItem {
  id String [pk]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  uniqueString String [not null]
  order Order [not null]
  orderId String [not null]
  warehouse Warehouse
  warehouseId String
  package Package
  packageId String
  quantity Float [not null]
  sku String [not null]
  productVariant ProductVariant [not null]
  productVariantId String [not null]
  tenant Tenant [not null]
  tenantId String [not null]
  zohoPackageLineItems ZohoPackageLineItem [not null]
  saleorFulfillmentsLines SaleorFulfillmentLine [not null]

  indexes {
    (uniqueString, tenantId) [unique]
  }
}

Table Order {
  id String [pk]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  date DateTime [not null]
  externalOrderId String
  orderStatus OrderStatus [not null, default: 'draft']
  paymentStatus OrderPaymentStatus [not null, default: 'unpaid']
  shipmentStatus OrderShipmentStatus [not null, default: 'pending']
  readyToFullfill Boolean [not null, default: false]
  orderNumber String [not null, note: 'Order-Numbers have to be unique per Tenant!
We use them as unique identifier between systems']
  referenceNumber String [note: 'if source system has a second ID which is benefitial to the user, we can provide it here']
  orderLineItems OrderLineItem [not null]
  packageLineItems PackageLineItem [not null]
  shippingPriceNet Float
  shippingPriceGross Float
  shippingPriceTax Tax
  shippingPriceTaxId String
  discountValueNet Float [not null, default: 0]
  totalPriceNet Float
  totalPriceGross Float [not null]
  mainContact Contact [not null, note: 'The person who has created this Order (In other systems this can also be a Useraccount)']
  mainContactId String [not null]
  language Language [not null, default: 'DE']
  packages Package [not null]
  shippingAddress Address
  shippingAddressId String
  billingAddress Address
  billingAddressId String
  tenant Tenant [not null]
  tenantId String [not null]
  payments Payment [not null]
  saleorOrders SaleorOrder [not null]
  zohoSalesOrders ZohoSalesOrder [not null]
  xentralProxyAuftraege XentralProxyAuftrag [not null]
  invoices Invoice [not null]

  indexes {
    (orderNumber, tenantId) [unique]
    (id, orderNumber) [unique]
  }
}

Table Address {
  id String [pk]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  street String
  additionalAddressLine String
  plz String
  city String
  countryCode CountryCode
  countryArea String
  company String
  phone String
  fullname String
  contact Contact [not null]
  contactId String [not null]
  tenant Tenant [not null]
  tenantId String [not null]
  normalizedName String [not null, note: 'A unique string identifying this address for easy lookup']
  zohoAddress ZohoAddress [not null, note: 'An array of zoho addresses. Can be multiple if the same address is synced to different zoho apps']
  shippingAddressInOrders Order [not null, note: 'An array of orders where this address is used as the shipping address']
  billingAddressInOrders Order [not null, note: 'An array of orders where this address is used as the billing address']

  indexes {
    (normalizedName, tenantId) [unique]
  }
}

Table Product {
  id String [pk]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  name String [not null]
  normalizedName String [not null]
  hsCode String
  countryOfOrigin CountryCode
  variants ProductVariant [not null]
  tenant Tenant [not null]
  tenantId String [not null]

  indexes {
    (name, tenantId) [unique]
    (normalizedName, tenantId) [unique]
  }
}

Table ProductVariant {
  id String [pk]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  sku String [not null]
  variantName String
  ean String
  product Product [not null]
  productId String [not null]
  tenant Tenant [not null]
  tenantId String [not null]
  stockEntries StockEntries [not null]
  orderLineItem OrderLineItem [not null]
  packagelineItem PackageLineItem [not null]
  zohoItem ZohoItem [not null]
  xentralArtikel XentralArtikel [not null]
  saleorProductVariant SaleorProductVariant [not null]
  stockOnHand Int
  isBundleProduct Boolean [not null, default: false]
  billOfMaterial BillOfMaterial
  BillOfMaterialEntries BillOfMaterialEntries [not null]

  indexes {
    (sku, tenantId) [unique]
    (id, sku) [unique]
  }
}

Table BillOfMaterial {
  id String [pk]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  productVariant ProductVariant [not null]
  productVariantId String [unique, not null]
  billOfMaterialEntries BillOfMaterialEntries [not null]
  tenant Tenant [not null]
  tenantId String [not null]

  indexes {
    (productVariantId, tenantId) [unique]
  }
}

Table BillOfMaterialEntries {
  id String [pk]
  billOfMaterial BillOfMaterial [not null]
  billOfMaterialId String [not null]
  part ProductVariant [not null]
  partId String [not null]
  quantity Int [not null]
}

Table XentralArtikel {
  id String [not null]
  xentralNummer String [not null]
  xentralProxyApp XentralProxyApp [not null]
  xentralProxyAppId String [not null]
  productVariant ProductVariant [not null]
  productVariantId String [not null]

  indexes {
    (id, xentralProxyAppId) [unique]
    (xentralNummer, xentralProxyAppId) [unique]
  }
}

Table StockEntries {
  id String [pk]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  tenant Tenant [not null]
  tenantId String [not null]
  warehouse Warehouse [not null]
  warehouseId String [not null]
  productVariant ProductVariant [not null]
  productVariantId String [not null]
  actualCommittedStock Int [not null, default: 0]
  actualAvailableStock Int [not null, default: 0]
  actualAvailableForSaleStock Int [not null, default: 0]

  indexes {
    (warehouseId, productVariantId, tenantId) [unique]
  }
}

Table BraintreeApp {
  id String [pk]
  enabled Boolean [not null, default: true]
  sandbox Boolean [not null, default: false]
  merchantId String [not null]
  publicKey String [not null]
  privateKey String [not null]
  tenant Tenant [not null]
  tenantId String [not null]
  cronSchedule String [not null, default: '*/30 * * * *']
  cronTimeout Int [not null, default: 800]
  braintreeTransactions BraintreeTransaction [not null]
}

Table BraintreeTransaction {
  id String [not null, note: 'The Braintree internal ID']
  createdAt DateTime [not null]
  updatedAt DateTime [not null]
  payPalTransactionId String [note: 'If this braintree transaction is a paypal payment, we store the paypal transaction id as well']
  status String
  braintreeApp BraintreeApp [not null]
  braintreeAppId String [not null]
  payment Payment [not null]
  paymentId String [not null]

  indexes {
    (id, braintreeAppId) [unique]
  }
}

Table ElasticCluster {
  id String [pk]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  endpoint String [not null]
  username String [not null]
  password String [not null]
  index String
  elasticLogDrainIntegrations ElasticLogDrainIntegration [not null]
}

Table VercelLogDrainApp {
  id String [pk]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  configurationId String [unique, not null]
  installationId String [unique, not null]
  projectId String [unique]
  teamId String
  userId String [not null]
  webhooks IncomingWebhook [not null]
  elasticLogDrainIntegrations ElasticLogDrainIntegration [not null]
}

Table ElasticLogDrainIntegration {
  id String [pk]
  enabled Boolean [not null, default: true]
  subscription Subscription
  subscriptionId String [unique]
  tenant Tenant [not null]
  tenantId String [not null]
  logDrainApp VercelLogDrainApp [not null]
  logDrainAppId String [unique, not null]
  elasticCluster ElasticCluster [not null]
  elasticClusterId String [unique, not null]
}

Table Package {
  id String [pk]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  carrier Carrier [not null]
  state PackageState [not null, default: 'INIT']
  number String [not null]
  trackingId String
  carrierTrackingUrl String
  order Order [not null]
  orderId String [not null]
  events PackageEvent [not null]
  packageLineItems PackageLineItem [not null]
  zohoPackage ZohoPackage [not null]
  saleorPackage SaleorPackage [not null]
  tenant Tenant [not null]
  tenantId String [not null]

  indexes {
    (number, tenantId) [unique]
  }
}

Table PackageEvent {
  id String [pk]
  time DateTime [not null]
  state PackageState [not null]
  message String
  package Package [not null]
  packageId String [not null]
  location String
  sentEmail TransactionalEmail
}

Table TransactionalEmail {
  id String [pk]
  time DateTime [not null]
  email String [not null]
  sentEmailId String [not null]
  packageEvent PackageEvent [not null]
  packageEventId String [unique, not null]
}

Table TrackingEmailApp {
  id String [pk]
  tenant Tenant [not null]
  tenantId String [not null]
  sendgridTemplates SendgridTemplate [not null]
  defaultLanguage Language [not null]
  sender String [not null]
  replyTo String [not null]
  integration TrackingIntegration [not null]
}

Table SendgridTemplate {
  id String [pk]
  name String [not null]
  packageState PackageState
  language Language [not null]
  subject String [not null]
  templateId String [not null]
  trackingEmailApp TrackingEmailApp [not null]
  trackingEmailAppId String [not null]

  indexes {
    (trackingEmailAppId, language, packageState) [unique]
  }
}

Table DpdApp {
  id String [pk]
  name String
  tenant Tenant [not null]
  tenantId String [unique, not null]
  integration TrackingIntegration
  webhooks IncomingWebhook [not null]
}

Table ProductDataFeedApp {
  id String [pk]
  productDetailStorefrontURL String [not null]
  tenant Tenant [not null]
  tenantId String [unique, not null]
  webhooks IncomingWebhook [not null]
  integration ProductDataFeedIntegration
}

Table LogisticsApp {
  id String [pk]
  currentOrdersCustomViewId String [not null]
  nextFiveDaysOrdersCustomViewId String [not null]
  currentBulkOrdersCustomViewId String [not null]
  nextFiveDaysBulkOrdersCustomViewId String [not null]
  tenant Tenant [not null]
  tenantId String [unique, not null]
  webhooks IncomingWebhook [not null]
  integration LogisticsIntegration
}

Table ZohoApp {
  id String [pk]
  orgId String [not null]
  clientId String [not null]
  clientSecret String [not null]
  tenant Tenant [not null]
  tenantId String [unique, not null]
  orgLanguage Language [not null, default: 'DE', note: 'The language, that this org is set to. Some API fields like the country name work with translated names, so we need to know the orgs language']
  strapiToZohoIntegrations StrapiToZohoIntegration [not null]
  logisticsIntegrations LogisticsIntegration [not null]
  trackingIntegrations TrackingIntegration [not null]
  webhooks IncomingWebhook [not null]
  saleorZohoIntegration SaleorZohoIntegration [not null]
  zohoPayments ZohoPayment [not null]
  zohoItems ZohoItem [not null]
  zohoWarehouses ZohoWarehouse [not null]
  zohoContacts ZohoContact [not null]
  zohoInvoices ZohoInvoice [not null]
  zohoSalesOrder ZohoSalesOrder [not null]
  zohoPackageLineItems ZohoPackageLineItem [not null]
  zohoOrderLineItems ZohoOrderLineItem [not null]
  zohoTaxes ZohoTax [not null]
  zohoContactPersons ZohoContactPerson [not null]
  zohoAddresses ZohoAddress [not null]
  zohoPackages ZohoPackage [not null]
  zohoAccounts ZohoBankAccount [not null]
}

Table SaleorApp {
  id String [pk]
  domain String [not null]
  name String [not null]
  installedSaleorApps InstalledSaleorApp [not null]
  tenant Tenant [not null]
  tenantId String [not null]

  indexes {
    (domain, tenantId) [unique]
    (id, domain) [unique]
  }
}

Table InstalledSaleorApp {
  id String [pk]
  type SaleorAppType
  webhooks IncomingWebhook [not null]
  token String [not null]
  channelSlug String
  saleorApp SaleorApp [not null]
  saleorAppId String [not null]
  domain String [not null]
  saleorZohoIntegration SaleorZohoIntegration [not null]
  productDataFeedIntegration ProductDataFeedIntegration [not null]
  saleorPayment SaleorPayment [not null]
  saleorPaymentGateway SaleorPaymentGateway [not null]
  saleorProductVariant SaleorProductVariant [not null]
  saleorWarehouse SaleorWarehouse [not null]
  saleorOrder SaleorOrder [not null]
  saleorOrderLineItem SaleorOrderLineItem [not null]
  saleorFulfilmentLines SaleorFulfillmentLine [not null]
  saleorPackage SaleorPackage [not null]

  indexes {
    (domain, channelSlug) [unique]
  }
}

Table Tenant {
  id String [pk]
  name String [not null]
  subscriptions Subscription [not null]
  saleorApps SaleorApp [not null]
  zohoApps ZohoApp [not null]
  productdatafeedApps ProductDataFeedApp [not null]
  strapiApps StrapiApp [not null]
  productDataFeedIntegrations ProductDataFeedIntegration [not null]
  strapiToZohoIntegrations StrapiToZohoIntegration [not null]
  logisticsIntegrations LogisticsIntegration [not null]
  logisticsApps LogisticsApp [not null]
  trackingEmailApps TrackingEmailApp [not null]
  dpdApps DpdApp [not null]
  trackingIntegrations TrackingIntegration [not null]
  elasticLogDrainIntegration ElasticLogDrainIntegration [not null]
  xentralProxyIntegration XentralProxyIntegration [not null]
  xentralProxyApp XentralProxyApp [not null]
  order Order [not null]
  contact Contact [not null]
  company Company [not null]
  saleorZohoIntegration SaleorZohoIntegration [not null]
  product Product [not null]
  productVariant ProductVariant [not null]
  payment Payment [not null]
  paymentMethods PaymentMethod [not null]
  warehouse Warehouse [not null]
  invoice Invoice [not null]
  orderLineItem OrderLineItem [not null]
  packageLineItem PackageLineItem [not null]
  braintree BraintreeApp [not null]
  tax Tax [not null]
  package Package [not null]
  stockEntries StockEntries [not null]
  addresses Address [not null]
  billOfMaterial BillOfMaterial [not null]
}

Table Subscription {
  id String [pk]
  tenant Tenant [not null]
  tenantId String [not null]
  payedUntil DateTime
  productDataFeedIntegration ProductDataFeedIntegration
  strapiToZohoIntegration StrapiToZohoIntegration
  logisticsIntegration LogisticsIntegration
  trackingIntegration TrackingIntegration
  elasticLogDrainIntegration ElasticLogDrainIntegration [not null]
  saleorZohoIntegration SaleorZohoIntegration [not null]
  xentralProxyIntegration XentralProxyIntegration [not null]
}

Table TrackingIntegration {
  id String [pk]
  enabled Boolean [not null, default: true]
  subscription Subscription
  subscriptionId String [unique]
  tenant Tenant [not null]
  tenantId String [not null]
  dpdApp DpdApp [not null]
  dpdAppId String [unique, not null]
  trackingEmailApp TrackingEmailApp [not null]
  trackingEmailAppId String [not null]
  zohoApp ZohoApp
  zohoAppId String
}

Table ProductDataFeedIntegration {
  id String [pk]
  enabled Boolean [not null, default: true]
  subscription Subscription
  subscriptionId String [unique]
  tenant Tenant [not null]
  tenantId String [not null]
  productDataFeedApp ProductDataFeedApp [not null]
  productDataFeedAppId String [unique, not null]
  installedSaleorApp InstalledSaleorApp
  installedSaleorAppId String
}

Table CronJobState {
  id String [pk]
  lastRun DateTime
  lastRunStatus CronJobStatus
}

Table SaleorZohoIntegration {
  id String [pk]
  enabled Boolean [not null, default: true]
  subscription Subscription
  subscriptionId String [unique]
  tenant Tenant [not null]
  tenantId String [not null]
  zohoApp ZohoApp [not null]
  zohoAppId String [not null]
  installedSaleorApp InstalledSaleorApp [not null]
  installedSaleorAppId String [not null]
  orderPrefix String [not null, default: 'STORE']
  syncContacts Boolean [not null, default: false]
  syncWarehouses Boolean [not null, default: false]
  syncOrders Boolean [not null, default: false]
  syncInvoices Boolean [not null, default: false]
  syncPayments Boolean [not null, default: false]
  syncProductStocks Boolean [not null, default: false]
  syncProducts Boolean [not null, default: false]
  syncPackages Boolean [not null, default: false]
  syncTaxes Boolean [not null, default: false]
  cronScheduleZoho String [not null, default: '*/30 * * * *']
  cronScheduleSaleor String [not null, default: '*/30 * * * *']
  cronTimeoutZoho Int [not null, default: 800]
  cronTimeoutSaleor Int [not null, default: 600]
}

Table LogisticsIntegration {
  id String [pk]
  enabled Boolean [not null, default: true]
  subscription Subscription
  subscriptionId String [unique]
  tenant Tenant [not null]
  tenantId String [not null]
  zohoApp ZohoApp [not null]
  zohoAppId String [not null]
  logisticsApp LogisticsApp [not null]
  logisticsAppId String [unique, not null]
}

Table StrapiToZohoIntegration {
  id String [pk]
  payedUntil DateTime
  enabled Boolean [not null, default: true]
  strapiContentType String [not null, default: 'bulkorder']
  subscription Subscription
  subscriptionId String [unique]
  tenant Tenant [not null]
  tenantId String [not null]
  strapiApp StrapiApp [not null]
  strapiAppId String [unique, not null]
  zohoApp ZohoApp [not null]
  zohoAppId String [not null]
}

Table StrapiApp {
  id String [pk]
  name String [not null]
  webhooks IncomingWebhook [not null]
  tenant Tenant [not null]
  tenantId String [not null]
  integration StrapiToZohoIntegration
}

Table XentralProxyApp {
  id String [pk]
  username String [not null]
  password String [not null]
  projectId Int [not null]
  url String [not null]
  tenant Tenant [not null]
  tenantId String [unique, not null]
  xentralProxyIntegration XentralProxyIntegration [not null]
  xentralProxyAuftraege XentralProxyAuftrag [not null]
  xentralArtikel XentralArtikel [not null]
}

Table XentralProxyIntegration {
  id String [pk]
  payedUntil DateTime
  enabled Boolean [not null, default: true]
  subscription Subscription
  subscriptionId String
  tenant Tenant [not null]
  tenantId String [not null]
  warehouse Warehouse [not null]
  warehouseId String [not null]
  xentralProxyApp XentralProxyApp [not null]
  xentralProxyAppId String [not null]
}

Table XentralProxyAuftrag {
  id String [not null]
  xentralId Int [not null]
  xentralBelegNr String [not null]
  xentralProxyApp XentralProxyApp [not null]
  xentralProxyAppId String [not null]
  order Order [not null]
  orderId String [not null]

  indexes {
    (xentralId, xentralProxyAppId) [unique]
    (id, xentralProxyAppId) [unique]
    (xentralBelegNr, xentralProxyAppId) [unique]
  }
}

Table IncomingWebhook {
  id String [pk]
  name String
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  secret SecretKey
  dpdApp DpdApp
  dpdAppId String
  logisticsApp LogisticsApp
  logisticsAppId String
  productDataFeedApp ProductDataFeedApp
  productDataFeedAppId String
  zohoApp ZohoApp
  zohoAppId String
  strapiApp StrapiApp
  strapiAppId String
  installedSaleorApp InstalledSaleorApp
  installedSaleorAppId String
  vercelLogDrainApp VercelLogDrainApp
  vercelLogDrainAppId String
}

Table SecretKey {
  id String [pk]
  name String
  secret String [not null]
  createdAt DateTime [default: `now()`, not null]
  incomingWebhook IncomingWebhook [not null]
  incomingWebhookId String [unique, not null]
}

Table InvoiceToPayment {
  paymentsId String [ref: > Payment.id]
  invoicesId String [ref: > Invoice.id]
}

Table InvoiceToOrder {
  ordersId String [ref: > Order.id]
  invoicesId String [ref: > Invoice.id]
}

Enum ZohoSalesOrderStatus {
  draft
  confirmed
  fulfilled
  shipped
}

Enum PaymentMethodType {
  braintree
  paypal
  stripe
  banktransfer
}

Enum GatewayType {
  paypal
  card
  banktransfer
}

Enum Currency {
  EUR
  USD
}

Enum OrderStatus {
  draft
  unconfirmed
  confirmed
  closed
  canceled
}

Enum OrderPaymentStatus {
  unpaid
  fullyPaid
  partiallyPaid
  fullyRefunded
  partiallyRefunded
}

Enum OrderShipmentStatus {
  pending
  partiallyShipped
  shipped
  delivered
}

Enum CountryCode {
  AD
  AE
  AF
  AG
  AI
  AL
  AM
  AO
  AQ
  AR
  AS
  AT
  AU
  AW
  AX
  AZ
  BA
  BB
  BD
  BE
  BF
  BG
  BH
  BI
  BJ
  BL
  BM
  BN
  BO
  BQ
  BR
  BS
  BT
  BV
  BW
  BY
  BZ
  CA
  CC
  CD
  CF
  CG
  CH
  CI
  CK
  CL
  CM
  CN
  CO
  CR
  CU
  CV
  CW
  CX
  CY
  CZ
  DE
  DJ
  DK
  DM
  DO
  DZ
  EC
  EE
  EG
  EH
  ER
  ES
  ET
  EU
  FI
  FJ
  FK
  FM
  FO
  FR
  GA
  GB
  GD
  GE
  GF
  GG
  GH
  GI
  GL
  GM
  GN
  GP
  GQ
  GR
  GS
  GT
  GU
  GW
  GY
  HK
  HM
  HN
  HR
  HT
  HU
  ID
  IE
  IL
  IM
  IN
  IO
  IQ
  IR
  IS
  IT
  JE
  JM
  JO
  JP
  KE
  KG
  KH
  KI
  KM
  KN
  KP
  KR
  KW
  KY
  KZ
  LA
  LB
  LC
  LI
  LK
  LR
  LS
  LT
  LU
  LV
  LY
  MA
  MC
  MD
  ME
  MF
  MG
  MH
  MK
  ML
  MM
  MN
  MO
  MP
  MQ
  MR
  MS
  MT
  MU
  MV
  MW
  MX
  MY
  MZ
  NA
  NC
  NE
  NF
  NG
  NI
  NL
  NO
  NP
  NR
  NU
  NZ
  OM
  PA
  PE
  PF
  PG
  PH
  PK
  PL
  PM
  PN
  PR
  PS
  PT
  PW
  PY
  QA
  RE
  RO
  RS
  RU
  RW
  SA
  SB
  SC
  SD
  SE
  SG
  SH
  SI
  SJ
  SK
  SL
  SM
  SN
  SO
  SR
  SS
  ST
  SV
  SX
  SY
  SZ
  TC
  TD
  TF
  TG
  TH
  TJ
  TK
  TL
  TM
  TN
  TO
  TR
  TT
  TV
  TW
  TZ
  UA
  UG
  UM
  US
  UY
  UZ
  VA
  VC
  VE
  VG
  VI
  VN
  VU
  WF
  WS
  YE
  YT
  ZA
  ZM
  ZW
}

Enum PackageState {
  INIT
  INFORMATION_RECEIVED
  IN_TRANSIT
  OUT_FOR_DELIVERY
  FAILED_ATTEMPT
  DELIVERED
  AVAILABLE_FOR_PICKUP
  EXCEPTION
  EXPIRED
  PENDING
}

Enum Carrier {
  DPD
  DHL
  UPS
  UNKNOWN
}

Enum Language {
  DE
  EN
}

Enum SaleorAppType {
  productdatafeed
  zohointegration
  mailchimpintegration
  paymentgatewaybanktransfer
  paymentgatewaybraintree
}

Enum CronJobStatus {
  success
  failure
}

Ref: SaleorOrder.(orderId, orderNumber) > Order.(id, orderNumber) [delete: Cascade]

Ref: SaleorOrder.installedSaleorAppId > InstalledSaleorApp.id [delete: Cascade]

Ref: SaleorPackage.packageId > Package.id [delete: Cascade]

Ref: SaleorPackage.installedSaleorAppId > InstalledSaleorApp.id [delete: Cascade]

Ref: SaleorFulfillmentLine.packageLineItemId > PackageLineItem.id [delete: Cascade]

Ref: SaleorFulfillmentLine.installedSaleorAppId > InstalledSaleorApp.id [delete: Cascade]

Ref: SaleorOrderLineItem.orderLineItemId > OrderLineItem.id [delete: Cascade]

Ref: SaleorOrderLineItem.installedSaleorAppId > InstalledSaleorApp.id [delete: Cascade]

Ref: SaleorPayment.(saleorOrderId, installedSaleorAppId) > SaleorOrder.(id, installedSaleorAppId)

Ref: SaleorPayment.paymentId > Payment.id [delete: Cascade]

Ref: SaleorPayment.installedSaleorAppId > InstalledSaleorApp.id [delete: Cascade]

Ref: SaleorProductVariant.productVariantId > ProductVariant.id [delete: Cascade]

Ref: SaleorProductVariant.installedSaleorAppId > InstalledSaleorApp.id [delete: Cascade]

Ref: SaleorWarehouse.warehouseId > Warehouse.id [delete: Cascade]

Ref: SaleorWarehouse.installedSaleorAppId > InstalledSaleorApp.id [delete: Cascade]

Ref: SaleorPaymentGateway.installedSaleorAppId > InstalledSaleorApp.id [delete: Cascade]

Ref: ZohoItem.productVariantId > ProductVariant.id [delete: Cascade]

Ref: ZohoItem.zohoAppId > ZohoApp.id [delete: Cascade]

Ref: ZohoPackage.packageId > Package.id [delete: Cascade]

Ref: ZohoPackage.zohoAppId > ZohoApp.id [delete: Cascade]

Ref: ZohoContact.zohoAppId > ZohoApp.id [delete: Cascade]

Ref: ZohoContactPerson.(zohoContactId, zohoAppId) > ZohoContact.(id, zohoAppId) [delete: Cascade]

Ref: ZohoContactPerson.contactId > Contact.id [delete: Cascade]

Ref: ZohoContactPerson.zohoAppId > ZohoApp.id [delete: Cascade]

Ref: ZohoAddress.addressId > Address.id [delete: Cascade]

Ref: ZohoAddress.zohoAppId > ZohoApp.id [delete: Cascade]

Ref: ZohoSalesOrder.(zohoContactId, zohoAppId) > ZohoContact.(id, zohoAppId) [delete: Cascade]

Ref: ZohoSalesOrder.orderId > Order.id [delete: Cascade]

Ref: ZohoSalesOrder.zohoAppId > ZohoApp.id [delete: Cascade]

Ref: ZohoSalesOrder.(zohoContactPersonId, zohoContactPersonZohoAppId) > ZohoContactPerson.(id, zohoAppId)

Ref: ZohoInvoice.invoiceId > Invoice.id [delete: Cascade]

Ref: ZohoInvoice.zohoAppId > ZohoApp.id [delete: Cascade]

Ref: ZohoPayment.paymentId > Payment.id [delete: Cascade]

Ref: ZohoPayment.zohoAppId > ZohoApp.id [delete: Cascade]

Ref: ZohoBankAccount.zohoAppId > ZohoApp.id [delete: Cascade]

Ref: ZohoWarehouse.warehouseId > Warehouse.id [delete: Cascade]

Ref: ZohoWarehouse.zohoAppId > ZohoApp.id [delete: Cascade]

Ref: ZohoTax.taxId > Tax.id [delete: Cascade]

Ref: ZohoTax.zohoAppId > ZohoApp.id [delete: Cascade]

Ref: ZohoOrderLineItem.orderLineItemId > OrderLineItem.id [delete: Cascade]

Ref: ZohoOrderLineItem.zohoAppId > ZohoApp.id [delete: Cascade]

Ref: ZohoPackageLineItem.packagelineItemId > PackageLineItem.id [delete: Cascade]

Ref: ZohoPackageLineItem.zohoAppId > ZohoApp.id [delete: Cascade]

Ref: ZohoPackageLineItem.orderLineItemId > OrderLineItem.id

Ref: Invoice.tenantId > Tenant.id [delete: Cascade]

Ref: Tax.tenantId > Tenant.id [delete: Cascade]

Ref: Payment.orderId > Order.id

Ref: Payment.tenantId > Tenant.id [delete: Cascade]

Ref: Payment.paymentMethodId > PaymentMethod.id

Ref: PaymentMethod.(saleorPaymentGatewayId, saleorPaymentGatewayInstalledSaleorAppId) > SaleorPaymentGateway.(id, installedSaleorAppId) [delete: Cascade]

Ref: PaymentMethod.(zohoBankAccountId, zohoBankAccountZohoAppId) > ZohoBankAccount.(id, zohoAppId) [delete: Cascade]

Ref: PaymentMethod.tenantId > Tenant.id [delete: Cascade]

Ref: Company.tenantId > Tenant.id [delete: Cascade]

Ref: Contact.companyId > Company.id

Ref: Contact.tenantId > Tenant.id [delete: Cascade]

Ref: Warehouse.tenantId > Tenant.id [delete: Cascade]

Ref: OrderLineItem.orderId > Order.id [delete: Cascade]

Ref: OrderLineItem.warehouseId > Warehouse.id

Ref: OrderLineItem.taxId > Tax.id [delete: Cascade]

Ref: OrderLineItem.(productVariantId, sku) > ProductVariant.(id, sku)

Ref: OrderLineItem.tenantId > Tenant.id [delete: Cascade]

Ref: PackageLineItem.orderId > Order.id [delete: Cascade]

Ref: PackageLineItem.warehouseId > Warehouse.id

Ref: PackageLineItem.packageId > Package.id

Ref: PackageLineItem.(productVariantId, sku) > ProductVariant.(id, sku)

Ref: PackageLineItem.tenantId > Tenant.id [delete: Cascade]

Ref: Order.shippingPriceTaxId > Tax.id [delete: Cascade]

Ref: Order.mainContactId > Contact.id

Ref: Order.shippingAddressId > Address.id [delete: Cascade]

Ref: Order.billingAddressId > Address.id [delete: Cascade]

Ref: Order.tenantId > Tenant.id [delete: Cascade]

Ref: Address.contactId > Contact.id [delete: Cascade]

Ref: Address.tenantId > Tenant.id [delete: Cascade]

Ref: Product.tenantId > Tenant.id [delete: Cascade]

Ref: ProductVariant.productId > Product.id [delete: Cascade]

Ref: ProductVariant.tenantId > Tenant.id [delete: Cascade]

Ref: BillOfMaterial.productVariantId - ProductVariant.id [delete: Cascade]

Ref: BillOfMaterial.tenantId > Tenant.id [delete: Cascade]

Ref: BillOfMaterialEntries.billOfMaterialId > BillOfMaterial.id [delete: Cascade]

Ref: BillOfMaterialEntries.partId > ProductVariant.id [delete: Cascade]

Ref: XentralArtikel.xentralProxyAppId > XentralProxyApp.id

Ref: XentralArtikel.productVariantId > ProductVariant.id

Ref: StockEntries.tenantId > Tenant.id [delete: Cascade]

Ref: StockEntries.warehouseId > Warehouse.id [delete: Cascade]

Ref: StockEntries.productVariantId > ProductVariant.id [delete: Cascade]

Ref: BraintreeApp.tenantId > Tenant.id [delete: Cascade]

Ref: BraintreeTransaction.braintreeAppId > BraintreeApp.id [delete: Cascade]

Ref: BraintreeTransaction.paymentId > Payment.id [delete: Cascade]

Ref: ElasticLogDrainIntegration.subscriptionId > Subscription.id

Ref: ElasticLogDrainIntegration.tenantId > Tenant.id [delete: Cascade]

Ref: ElasticLogDrainIntegration.logDrainAppId > VercelLogDrainApp.id

Ref: ElasticLogDrainIntegration.elasticClusterId > ElasticCluster.id

Ref: Package.orderId > Order.id [delete: Cascade]

Ref: Package.tenantId > Tenant.id [delete: Cascade]

Ref: PackageEvent.packageId > Package.id [delete: Cascade]

Ref: TransactionalEmail.packageEventId - PackageEvent.id

Ref: TrackingEmailApp.tenantId > Tenant.id [delete: Cascade]

Ref: SendgridTemplate.trackingEmailAppId > TrackingEmailApp.id [delete: Cascade]

Ref: DpdApp.tenantId > Tenant.id [delete: Cascade]

Ref: ProductDataFeedApp.tenantId > Tenant.id [delete: Cascade]

Ref: LogisticsApp.tenantId > Tenant.id [delete: Cascade]

Ref: ZohoApp.tenantId > Tenant.id [delete: Cascade]

Ref: SaleorApp.tenantId > Tenant.id [delete: Cascade]

Ref: InstalledSaleorApp.(saleorAppId, domain) > SaleorApp.(id, domain) [delete: Cascade]

Ref: Subscription.tenantId > Tenant.id [delete: Cascade]

Ref: TrackingIntegration.subscriptionId - Subscription.id

Ref: TrackingIntegration.tenantId > Tenant.id [delete: Cascade]

Ref: TrackingIntegration.dpdAppId - DpdApp.id

Ref: TrackingIntegration.trackingEmailAppId > TrackingEmailApp.id

Ref: TrackingIntegration.zohoAppId > ZohoApp.id

Ref: ProductDataFeedIntegration.subscriptionId - Subscription.id

Ref: ProductDataFeedIntegration.tenantId > Tenant.id [delete: Cascade]

Ref: ProductDataFeedIntegration.productDataFeedAppId - ProductDataFeedApp.id

Ref: ProductDataFeedIntegration.installedSaleorAppId > InstalledSaleorApp.id

Ref: SaleorZohoIntegration.subscriptionId > Subscription.id

Ref: SaleorZohoIntegration.tenantId > Tenant.id [delete: Cascade]

Ref: SaleorZohoIntegration.zohoAppId > ZohoApp.id

Ref: SaleorZohoIntegration.installedSaleorAppId > InstalledSaleorApp.id [delete: Cascade]

Ref: LogisticsIntegration.subscriptionId - Subscription.id

Ref: LogisticsIntegration.tenantId > Tenant.id [delete: Cascade]

Ref: LogisticsIntegration.zohoAppId > ZohoApp.id

Ref: LogisticsIntegration.logisticsAppId - LogisticsApp.id

Ref: StrapiToZohoIntegration.subscriptionId - Subscription.id

Ref: StrapiToZohoIntegration.tenantId > Tenant.id [delete: Cascade]

Ref: StrapiToZohoIntegration.strapiAppId - StrapiApp.id

Ref: StrapiToZohoIntegration.zohoAppId > ZohoApp.id

Ref: StrapiApp.tenantId > Tenant.id [delete: Cascade]

Ref: XentralProxyApp.tenantId > Tenant.id [delete: Cascade]

Ref: XentralProxyIntegration.subscriptionId > Subscription.id

Ref: XentralProxyIntegration.tenantId > Tenant.id [delete: Cascade]

Ref: XentralProxyIntegration.warehouseId > Warehouse.id [delete: Cascade]

Ref: XentralProxyIntegration.xentralProxyAppId > XentralProxyApp.id

Ref: XentralProxyAuftrag.xentralProxyAppId > XentralProxyApp.id

Ref: XentralProxyAuftrag.orderId > Order.id

Ref: IncomingWebhook.dpdAppId > DpdApp.id [delete: Cascade]

Ref: IncomingWebhook.logisticsAppId > LogisticsApp.id [delete: Cascade]

Ref: IncomingWebhook.productDataFeedAppId > ProductDataFeedApp.id [delete: Cascade]

Ref: IncomingWebhook.zohoAppId > ZohoApp.id [delete: Cascade]

Ref: IncomingWebhook.strapiAppId > StrapiApp.id [delete: Cascade]

Ref: IncomingWebhook.installedSaleorAppId > InstalledSaleorApp.id [delete: Cascade]

Ref: IncomingWebhook.vercelLogDrainAppId > VercelLogDrainApp.id [delete: Cascade]

Ref: SecretKey.incomingWebhookId - IncomingWebhook.id [delete: Cascade]